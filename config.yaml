listen:
  http_port: 8080       # 建议先用高位端口测试，避免 80/443 权限问题
  https_port: 8443

domains:
  localhost:
    target: http://127.0.0.1:3000     # 改成你本地的后端服务地址
    ssl: false                        # 第一次测试建议关闭 ssl
    cert: certs/fullchain.pem
    key: certs/privkey.pem
    force_https: false
    basic_auth: null

  # 示例：如果你已经有域名和证书，可以这样写
  # example.com:
  #   target: http://127.0.0.1:3000
  #   ssl: true
  #   cert: certs/fullchain.pem
  #   key: certs/privkey.pem
  #   force_https: true

rate_limit:
  enabled: true
  default:
    requests_per_minute: 120          # 每分钟 120 次，比较宽松的测试值

cloudflare:
  enabled: false                      # 本地测试先关掉
  trust_headers: true
  only_allow_from_cf: false

security:
  ban_duration: 3600                  # 封禁 1 小时
  request_rate_threshold: 40
  ua_diversity_threshold: 10
  path_entropy_threshold: 4.5
  error_rate_threshold: 0.7
  max_body_size: 10485760             # 10MB
  max_headers_count: 64
  slow_request_timeout: 30            # 秒

waf:
  enabled: true
  rules_file: waf_rules.yaml

geoip:
  enabled: false                      # 测试时建议关闭，需要下载数据库
  db_path: GeoLite2-Country.mmdb

whitelist:
  path_prefix_exempt:
    - /health
    - /static/
    - /favicon.ico
  ua_regex_exempt:
    - ^curl/.*
    - ^PostmanRuntime/.*